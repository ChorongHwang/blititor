{% extends 'starter/layout.html' %}

{% block content %}
<div class="row">
    <div class="span12">
        <form id="postForm" method="post" action="/post" enctype="multipart/form-data" onsubmit="return postForm(this)">
            <fieldset>
                <legend>Make Post</legend>
                <label for="title">Title</label>
                <input class="input-block-level" type="text" id="title" name="title" placeholder="Title">
                <p class="controls">
                    <label class="checkbox inline"><input type="checkbox" data-bind="checked: useMenu"> Use Top Menu</label>
                    <label class="checkbox inline"><input type="checkbox" data-bind="checked: useImage"> Use Background Image</label>
                </p>
                <div class="input-prepend" data-bind="visible: useMenu">
                    <span class="add-on">Menu</span>
                    <input class="span3" id="prependedInput" type="text" name="menu_title" placeholder="Menu Title">
                </div>
                <div class="input-prepend" data-bind="visible: useMenu">
                    <span class="add-on">Key</span>
                    <input class="span1" type="text" name="bind_key" placeholder="Bind">
                </div>
                <div class="input-prepend" data-bind="visible: useImage">
                    <input type="file" name="bg_image">
                </div>
                <p class="container">
                    <textarea class="input-block-level" id="summernote" name="content" rows="18"></textarea>
                </p>
                <label for="excerpt">Excerpt</label>
                <input class="input-block-level" type="text" id="excerpt" name="excerpt" placeholder="Excerpt">
            </fieldset>
            <button type="submit" class="btn btn-primary">Save changes</button>
            <button type="button" id="cancel" class="btn">Cancel</button>
        </form>
    </div>
</div>
{% endblock %}

{% block script %}
<link href="/lib/font-awesome/build/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet">
<link href="http://hackerwins.github.io/summernote/summernote.css" rel="stylesheet">
<script src="http://hackerwins.github.io/summernote/js/jquery.curstyles.min.js"></script>
<script src="http://hackerwins.github.io/summernote/summernote.js"></script>
<script type="text/javascript">
    var postForm = function (el) {
        console.log(el);

        return false;
    };
    var menuModel = {
        useMenu: ko.observable(false),
        useImage: ko.observable(false)
    };
    $(document).ready(function () {
        $('#summernote').summernote({
            height: 361,
            focus: true
        });
        ko.applyBindings(menuModel);

        $('#cancel').click(function () {
            history.back();
        });
    });
</script>
{% endblock %}
